{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ note.title }} | Preview</title>
  <link rel="stylesheet" href="{% static 'notes/css/view_note.css' %}">
</head>
<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="container navbar-container">
      <a href="{% url 'notes:index' %}" class="logo">NotesShare</a>
    </div>
  </header>

  <!-- Note Preview -->
  <div class="container" style="margin-top:2rem;">
    <h2>{{ note.title }}</h2>
    <p>Uploaded by: {{ note.uploaded_by.username }}</p>

    <div class="note-preview" style="margin-top:1.5rem;">
      {% if note.file_name|slice:"-4:" == ".pdf" %}
          <!-- Native PDF Preview -->
          <iframe src="{{ file_url }}" width="100%" height="600px"></iframe>

      {% elif note.file_name|slice:"-5:" == ".docx" or note.file_name|slice:"-5:" == ".pptx" or note.file_name|slice:"-5:" == ".xlsx" %}
          <!-- Google Docs Viewer for Office Files -->
          <iframe src="https://docs.google.com/gview?url={{ file_url }}&embedded=true" 
                  width="100%" height="600px"></iframe>

      {% elif note.file_name|slice:"-4:" == ".jpg" or note.file_name|slice:"-4:" == ".png" or note.file_name|slice:"-5:" == ".jpeg" %}
          <!-- Image Preview -->
          <img src="{{ file_url }}" alt="{{ note.title }}" style="max-width:100%; border-radius:8px;">

      {% else %}
          <!-- Fallback -->
          <p>Preview not available for this file type. Please download below:</p>
      {% endif %}
    </div>

    <!-- Action Buttons -->
    <div style="margin-top:1rem;">
      <a href="{% url 'notes:download' note.id %}" class="btn btn-primary" download>Download</a>
      <a href="{% url 'notes:index' %}" class="btn btn-secondary">Back</a>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>Â© 2025 NotesShare. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>

